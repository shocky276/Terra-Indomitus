namespace = fajia_events

fajia_events.1 = { #轻礼重法
	type = country_event
	title = "fajia_events.1.t"
	desc = "fajia_events.1.desc"
	picture = china_political
	left_portrait = current_ruler
	right_portrait = scope:fajia_minister_target
	
	trigger = {
		is_ai = no
		NOT = {
			has_country_modifier = qinglizhongfa_buff
			has_variable = fajiajiesheng
		}
		country_culture_group = chinese
		any_character = {
			prisoner = no
			is_adult = yes
			has_trait = fajia_trait
			is_ruler = no
			is_female = no
		}
		current_ruler = {
		}
	}

	immediate = {
		random_character = {
			limit = {
				prisoner = no
				is_adult = yes
				is_female = no
				is_ruler = no
				has_trait = fajia_trait
			}
			save_scope_as = fajia_minister_target
		}
		current_ruler = {
			save_scope_as = country_current_ruler
		}
	}

	option = { #同意
		name = "fajia_events.1.a"
		trigger = {
			scope:country_current_ruler = {
				NOT = {
					has_trait = merciful
					has_trait = loving
				}
				OR = {
					finesse > 8
					has_trait = fajia_trait
				}
			}
			OR = {
				has_country_modifier = fajia_buff
				has_country_modifier = qin_buff
			}
		}
		scope:fajia_minister_target = {
			add_loyalty = aos_loyalty_adopt_suggestion
		}
		add_country_modifier = {
			name = qinglizhongfa_buff
			duration = 3650
		}
		add_stability = { 1 5 }
		add_treasury = { -100 -300 }
		add_political_influence = { -10 -20 }
	}

	option = { #敷衍
		name = "fajia_events.1.b"
		trigger = {
			scope:country_current_ruler = {
				NOT = {
					has_trait = abrasive
				}
			}
		}
		scope:fajia_minister_target = {
			add_loyalty = aos_loyalty_suggestion_be_perfunctory
		}
	}

	option = { #能言善辩的君主否决但不减忠诚度
		name = "fajia_events.1.c"
		trigger = {
			scope:country_current_ruler = {
				has_trait = silver_tongued
				has_trait = orator
			}
		}
	}

	option = { #怒斥反驳
		name = "fajia_events.1.d"
		custom_tooltip = abrasive_tooltip
		trigger = {
			current_ruler = {
				NOT = {
					has_trait = fajia_trait
				}
			}
		}
		scope:fajia_minister_target = {
			add_loyalty = aos_loyalty_be_insulted
		}
	}

	option = { #关起来
		name = "fajia_events.1.e"
		custom_tooltip = abrasive_tooltip
		trigger = {
			OR = {
				current_ruler = {
					has_trait = rujia_trait
				}
				has_country_modifier = rujia_buff
			}
		}
		scope:fajia_minister_target = {
			remove_all_positions = yes
			add_loyalty = aos_loyalty_be_insulted
			root = {
				imprison = {
					target = scope:fajia_minister_target
				}
			}
		}
		scope:country_current_ruler = {
			add_popularity = -5
		}
		set_variable = fajiajiesheng
	}

	option = { #君主是残暴者
		name = "rujia_events.1.f"
		trigger = {
			current_ruler = {
				has_trait = cruel
			}
		}
		scope:fajia_minister_target = {
			add_loyalty = aos_loyalty_suggestion_be_neglected
		}
		scope:country_current_ruler = {
			add_popularity = -40
		}
		add_country_modifier = {
			name = dufutianxia_buff
			duration = 1825
		}
	}
}

fajia_events.2 = { #轻罪重罚
	type = country_event
	title = "fajia_events.2.t"
	desc = "fajia_events.2.desc"
	picture = china_political
	left_portrait = current_ruler
	right_portrait = scope:fajia_minister_target
	
	trigger = {
		is_ai = no
		NOT = {
			has_country_modifier = qingzuizhongfa_buff
			has_variable = fajiajiesheng
		}
		country_culture_group = chinese
		any_character = {
			prisoner = no
			is_adult = yes
			has_trait = fajia_trait
			is_ruler = no
			is_female = no
		}
		current_ruler = {
		}
	}

	immediate = {
		random_character = {
			limit = {
				prisoner = no
				is_adult = yes
				is_female = no
				is_ruler = no
				has_trait = fajia_trait
			}
			save_scope_as = fajia_minister_target
		}
		current_ruler = {
			save_scope_as = country_current_ruler
		}
	}

	option = { #同意
		name = "fajia_events.2.a"
		trigger = {
			scope:country_current_ruler = {
				NOT = {
					has_trait = merciful
					has_trait = loving
				}
				OR = {
					finesse > 8
					has_trait = fajia_trait
				}
			}
			OR = {
				has_country_modifier = fajia_buff
				has_country_modifier = qin_buff
			}
		}
		scope:fajia_minister_target = {
			add_loyalty = aos_loyalty_adopt_suggestion
		}
		add_country_modifier = {
			name = qingzuizhongfa_buff
			duration = 3650
		}
		add_stability = { -6 -10 }
		add_treasury = { -50 -200 }
		add_political_influence = { -15 -30 }
	}

	option = { #敷衍
		name = "fajia_events.2.b"
		trigger = {
			NOT = {
				current_ruler = {
					has_trait = abrasive
				}
			}
		}
		scope:fajia_minister_target = {
			add_loyalty = aos_loyalty_suggestion_be_perfunctory
		}
	}

	option = { #能言善辩的君主否决但不减忠诚度
		name = "fajia_events.2.c"
		trigger = {
			current_ruler = {
				has_trait = silver_tongued
				has_trait = orator
			}
		}
	}

	option = { #怒斥反驳
		name = "fajia_events.2.d"
		custom_tooltip = abrasive_tooltip
		trigger = {
			NOT = {
				current_ruler = {
					has_trait = fajia_trait
				}
			}
		}
		scope:fajia_minister_target = {
			add_loyalty = aos_loyalty_be_insulted
		}
	}

	option = { #关起来
		name = "fajia_events.2.e"
		custom_tooltip = abrasive_tooltip
		trigger = {
			OR = {
				current_ruler = {
					has_trait = rujia_trait
				}
				has_country_modifier = rujia_buff
			}
		}
		scope:fajia_minister_target = {
			remove_all_positions = yes
			add_loyalty = aos_loyalty_be_insulted
			root = {
				imprison = {
					target = scope:fajia_minister_target
				}
			}
		}
		scope:country_current_ruler = {
			add_popularity = -5
		}
		set_variable = fajiajiesheng
	}

	option = { #君主是残暴者
		name = "fajia_events.2.f"
		trigger = {
			current_ruler = {
				has_trait = cruel
			}
		}
		scope:fajia_minister_target = {
			add_loyalty = aos_loyalty_suggestion_be_neglected
		}
		scope:country_current_ruler = {
			add_popularity = -40
		}
		add_country_modifier = {
			name = dufutianxia_buff
			duration = 1825
		}
	}
}

fajia_events.3 = { #以法治国
	type = country_event
	title = "fajia_events.3.t"
	desc = "fajia_events.3.desc"
	picture = china_political
	left_portrait = current_ruler
	right_portrait = scope:fajia_minister_target
	
	trigger = {
		NOT = {
			has_country_modifier = fajia_buff
			has_country_modifier = qin_buff
			has_variable = fajiajiesheng
		}
		country_culture_group = chinese
		any_character = {
			is_adult = yes
			prisoner = no
			has_trait = fajia_trait
			is_ruler = no
			is_female = no
		}
	}

	immediate = {
		random_character = {
			limit = {
				is_adult = yes
				prisoner = no
				has_trait = fajia_trait
				is_ruler = no
				is_female = no
			}
			save_scope_as = fajia_minister_target
		}
		current_ruler = {
			save_scope_as = fajia_events_ruler
		}
	}

	option = { #同意
		name = "fajia_events.3.a"
		trigger = {
			current_ruler = {
				NOT = {
					has_trait = abrasive
					has_trait = cruel
				}
				OR = {
					finesse > 10
					has_trait = fajia_trait
				}
			}
			NOT = {
				has_country_modifier = fajia_buff
				has_country_modifier = qin_buff
			}
		}
		scope:fajia_minister_target = {
			add_loyalty = aos_loyalty_adopt_suggestion
		}
		add_country_modifier = {
			name = fajia_buff
			duration = -1
		}
		set_variable = fajia
		add_political_influence = { -10 -20 }
		add_treasury = { -150 -300 }
		add_stability = { -15 -30 }
		hidden_effect = {
			remove_country_modifier = daojia_buff
			remove_country_modifier = rujia_buff
			remove_country_modifier = mojia_buff
			remove_country_modifier = qin_buff
			remove_variable = daojia
			remove_variable = rujia
			remove_variable = mojia
		}
	}

	option = { #婉拒
		name = "fajia_events.3.b"
		trigger = {
			current_ruler = {
				NOT = {
					has_trait = abrasive
					has_trait = cruel
				}
			}
		}
		scope:fajia_minister_target = {
			add_loyalty = aos_loyalty_suggestion_be_perfunctory
		}
	}

	option = { #怒骂
		name = "fajia_events.3.c"
		custom_tooltip = abrasive_tooltip
		trigger = {
			current_ruler = {
				OR = {
					has_trait = abrasive
					has_trait = cruel
				}
			}
		}
		scope:fajia_minister_target = {
			add_loyalty = aos_loyalty_be_insulted
		}
	}

	option = { #关起来
		name = "fajia_events.3.d"
		custom_tooltip = abrasive_tooltip
		trigger = {
			current_ruler = {
				has_trait = cruel
			}
		}
		scope:fajia_minister_target = {
			remove_all_positions = yes
			add_loyalty = aos_loyalty_be_insulted
			root = {
				imprison = {
					target = scope:fajia_minister_target
				}
			}
		}
		scope:fajia_events_ruler = {
			add_popularity = -40
		}
		add_country_modifier = {
			name = yanlushouzu_buff
			duration = 3650
		}
	}
}