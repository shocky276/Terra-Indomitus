namespace = china_unified
china_unified.1 = { #中国统一后皇帝统治风格
	
	type = country_event
	title = "china_unified.1.t"
	desc = "china_unified.1.desc"
	picture = china_political
	goto_location = root
	left_portrait = current_ruler

	trigger = {
		country_culture_group = chinese
	}
	
	immediate = {
		trigger_event = {
			id = wcwjhzhg_events.1
		}
	}
	
	option = { #天下是黎民百姓的
		name = china_unified.1.a
		ai_chance = {
			modifier = {
				factor = 5
			}
		}
		add_country_modifier = {
		name = shumintianxia_buff
		duration = -1
		}
	}
	
	option = { #文化压制
		name = china_unified.1.b
		ai_chance = {
			modifier = {
				factor = 10
			}
		}
		add_country_modifier = {
		name = yizutianxia_buff
		duration = -1
		}
	}
	
	option = { #天下是皇帝的
		name = china_unified.1.c
		ai_chance = {
			modifier = {
				factor = 5
			}
		}
		add_country_modifier = {
		name = dufutianxia_buff
		duration = -1
		}
	}
	
}

china_unified.2 = { #华夏文化组君主制国家AI自动替换女性幼年继承人为第二男性继承人
	hidden = yes
	type = country_event

	trigger = {
		country_culture_group = chinese
		is_monarchy = yes
		is_ai = yes
		current_ruler = {
			is_female = yes
		}
		any_character = {
			is_primary_heir = yes
			is_male = yes
			from_ruler_family = yes
		}
	}

	immediate = {
		every_character = {
			limit = {
				is_primary_heir = yes
				is_male = yes
				from_ruler_family = yes
			}
			save_scope_as = male_chinese_primary_heir
		}
		root = {
			set_as_ruler = scope:male_chinese_primary_heir
		}
	}
}

china_unified.3 = { #华夏文化组君主制国家AI男性君主无配偶，自动生成一配偶
	hidden = yes
	type = country_event

	trigger = {
		country_culture_group = chinese
		is_monarchy = yes
		is_ai = yes
		current_ruler = {
			is_male = yes
			is_adult = yes
			is_married = no
		}
	}

	immediate = {
		create_character = {
			female = yes
			age = 16
			save_scope_as = chinese_ruler_wife
		}
		current_ruler = {
			marry_character = scope:chinese_ruler_wife
		}
	}
}

namespace = yanchengtaobing
yanchengtaobing.1 = { #严惩逃兵
	
	type = country_event
	title = "yanchengtaobing.1.t"
	desc = "yanchengtaobing.1.desc"
	goto_location = root
	left_portrait = current_ruler

	trigger = {
		NOT = {
			has_country_modifier = yanctb_buff
			has_country_modifier = troops_deserter_buff
		}
		has_war_exhaustion >= 10
		war = yes
		political_influence >= 8
	}
	
	immediate = {
	}
	
	option = { #是
		name = yanchengtaobing.1.a
		add_political_influence = -8
		add_war_exhaustion = 5
		add_country_modifier = {
			name = yanctb_buff
			duration = -1
		}
	}
	
	option = { #否
		name = yanchengtaobing.1.b
		add_manpower = -5
		add_country_modifier = {
			name = troops_deserter_buff
			duration = -1
		}
	}
	
}

namespace = yichu_yanchengtaobing
yichu_yanchengtaobing.1 = { #和平移除严惩逃兵
	
	type = country_event
	hidden = yes

	trigger = {
		OR = {
			has_country_modifier = yanctb_buff
			has_country_modifier = troops_deserter_buff
		}
	war = no
	}
	
	immediate = {
	remove_country_modifier = yanctb_buff
	remove_country_modifier = troops_deserter_buff
	}
	
}

namespace = chinese_ruler_ascended_throne_events
chinese_ruler_ascended_throne_events.1 = { #中国新君即位统治风格
	
	type = country_event
	title = "chinese_ruler_ascended_throne_events.1.t"
	desc = "chinese_ruler_ascended_throne_events.1.desc"
	picture = china_political
	goto_location = root
	left_portrait = current_ruler

	trigger = {
		country_culture_group = chinese
	}
	
	immediate = {
	}
	
	option = { #为国为民
		name = chinese_ruler_ascended_throne_events.1.a
		trigger = {
			current_ruler = {
				finesse >= 8
			}
		}
		add_country_modifier = {
		name = weigwm_buff
		duration = -1
		}
	}
	
	option = { #安逸享乐
		name = chinese_ruler_ascended_throne_events.1.b
		add_country_modifier = {
		name = tantxl_buff
		duration = -1
		}
	}
	
	option = { #独揽大权
		name = chinese_ruler_ascended_throne_events.1.c
		add_country_modifier = {
		name = dufutianxia_buff
		duration = -1
		}
	}
	
}

namespace = governor_rebellion
governor_rebellion.1 = { #中原王朝诸侯叛乱
	type = country_event
	title = governor_rebellion.1.t
	desc = governor_rebellion.1.desc
	picture = china_political
	left_portrait = scope:governor_rebellion_character

	trigger = {
		current_date > 650.1.1
		country_culture_group = chinese
		num_of_cities >= 200
		OR = {
			stability < 8
			has_civil_war = yes
		}
		any_character = {
			is_governor = yes
			is_ruler = no
			loyalty < 50
			prisoner = no
			is_primary_heir = no
			OR = {
				has_trait = proud
				has_trait = abrasive
				has_trait = crafty
				has_trait = sceptical
				has_trait = arbitrary
				has_trait = cruel
				has_trait = vengeful
				has_trait = selfish
				has_trait = deceitful
				has_trait = shrewd
				has_trait = gluttonous
				has_trait = ambitious
				has_trait = sarcastic
				has_trait = miserly
				has_trait = jealous
			}
			NOR = {
				has_trait = guileless
				has_trait = righteous
				has_trait = chaste
				has_trait = humble
				has_trait = honest
				has_trait = generous
				has_trait = submissive
			}
		}
	}

	immediate = {
		every_character = {
			limit = {
				is_governor = yes
				is_ruler = no
				loyalty < 50
				prisoner = no
				is_primary_heir = no
				OR = {
					has_trait = proud
					has_trait = abrasive
					has_trait = crafty
					has_trait = sceptical
					has_trait = arbitrary
					has_trait = cruel
					has_trait = vengeful
					has_trait = selfish
					has_trait = deceitful
					has_trait = shrewd
					has_trait = gluttonous
					has_trait = ambitious
					has_trait = sarcastic
					has_trait = miserly
					has_trait = jealous
				}
				NOR = {
					has_trait = guileless
					has_trait = righteous
					has_trait = chaste
					has_trait = humble
					has_trait = honest
					has_trait = generous
					has_trait = submissive
				}
			}
			save_scope_as = governor_rebellion_character
		}
		scope:governor_rebellion_character = {
			every_governor_state = {
				every_state_province = {
					save_scope_as = governor_rebellion_province
				}
			}
		}
		scope:governor_rebellion_province = {
			create_country = {
			save_scope_as = governor_rebellion_country
			}
		}
		scope:governor_rebellion_character = {
			every_governor_state = {
				limit = {
					any_state_province = {
						any_neighbor_province = {
							owner = root
						}
					}
				}
				every_state_province = {
					set_owned_by = scope:governor_rebellion_country
				}
			}
		}
		scope:governor_rebellion_character = {
			move_country = scope:governor_rebellion_country
		}
		scope:governor_rebellion_country = {
			set_as_ruler = scope:governor_rebellion_character
			trigger_event = {
				id = governor_rebellion.4
			}
		}
	}

	option = {
		name = governor_rebellion.1.a
		scope:governor_rebellion_country = {
			declare_war_with_wargoal = {
				war_goal = only_ai_can_use_wargoal
				target = root
			}
		}
	}
}

governor_rebellion.2 = {
	type = country_event
	title = governor_rebellion.2.t
	desc = governor_rebellion.2.desc

	trigger = {
		current_date > 650.1.1
		num_of_cities >= 200
		OR = {
			stability < 8
			has_civil_war = yes
		}
		any_character = {
			is_governor = yes
			is_ruler = no
			loyalty < 50
			prisoner = no
			is_primary_heir = no
			OR = {
				has_trait = proud
				has_trait = abrasive
				has_trait = crafty
				has_trait = sceptical
				has_trait = arbitrary
				has_trait = cruel
				has_trait = vengeful
				has_trait = selfish
				has_trait = deceitful
				has_trait = shrewd
				has_trait = gluttonous
				has_trait = ambitious
				has_trait = sarcastic
				has_trait = miserly
				has_trait = jealous
			}
			NOR = {
				has_trait = guileless
				has_trait = righteous
				has_trait = chaste
				has_trait = humble
				has_trait = honest
				has_trait = generous
				has_trait = submissive
			}
		}
	}

	immediate = {
		every_character = {
			limit = {
				is_governor = yes
				is_ruler = no
				loyalty < 50
				prisoner = no
				is_primary_heir = no
				OR = {
					has_trait = proud
					has_trait = abrasive
					has_trait = crafty
					has_trait = sceptical
					has_trait = arbitrary
					has_trait = cruel
					has_trait = vengeful
					has_trait = selfish
					has_trait = deceitful
					has_trait = shrewd
					has_trait = gluttonous
					has_trait = ambitious
					has_trait = sarcastic
					has_trait = miserly
					has_trait = jealous
				}
				NOR = {
					has_trait = guileless
					has_trait = righteous
					has_trait = chaste
					has_trait = humble
					has_trait = honest
					has_trait = generous
					has_trait = submissive
				}
			}
			save_scope_as = governor_rebellion_character
		}
		scope:governor_rebellion_character = {
			every_governor_state = {
				every_state_province = {
					save_scope_as = governor_rebellion_province
				}
			}
		}
		scope:governor_rebellion_province = {
			create_country = {
			save_scope_as = governor_rebellion_country
			}
		}
		scope:governor_rebellion_character = {
			every_governor_state = {
				limit = {
					any_state_province = {
						any_neighbor_province = {
							owner = root
						}
					}
				}
				every_state_province = {
					set_owned_by = scope:governor_rebellion_country
				}
			}
		}
		scope:governor_rebellion_character = {
			move_country = scope:governor_rebellion_country
		}
		scope:governor_rebellion_country = {
			set_as_ruler = scope:governor_rebellion_character
			trigger_event = {
				id = governor_rebellion.4
			}
		}
	}

	option = {
		name = governor_rebellion.2.a
		scope:governor_rebellion_country = {
			declare_war_with_wargoal = {
				war_goal = only_ai_can_use_wargoal
				target = root
			}
		}
	}
}
governor_rebellion.3 = { #州牧请求自治
	type = country_event
	title = governor_rebellion.3.t
	desc = governor_rebellion.3.desc
	picture = china_political
	left_portrait = scope:governor_autonomy_character

	trigger = {
		current_date > 650.1.1
		OR = {
			has_country_modifier = tudijianbing2_buff
		}
		any_character = {
			is_governor = yes
			is_ruler = no
			loyalty < 70
			prisoner = no
			is_primary_heir = no
			OR = {
				has_trait = proud
				has_trait = abrasive
				has_trait = crafty
				has_trait = sceptical
				has_trait = arbitrary
				has_trait = cruel
				has_trait = vengeful
				has_trait = selfish
				has_trait = deceitful
				has_trait = shrewd
				has_trait = gluttonous
				has_trait = ambitious
				has_trait = sarcastic
				has_trait = miserly
				has_trait = jealous
			}
			NOR = {
				has_trait = guileless
				has_trait = righteous
				has_trait = chaste
				has_trait = humble
				has_trait = honest
				has_trait = generous
				has_trait = submissive
			}
		}
	}

	immediate = {
		every_character = {
			limit = {
				is_governor = yes
				is_ruler = no
				loyalty < 70
				prisoner = no
				is_primary_heir = no
				OR = {
					has_trait = proud
					has_trait = abrasive
					has_trait = crafty
					has_trait = sceptical
					has_trait = arbitrary
					has_trait = cruel
					has_trait = vengeful
					has_trait = selfish
					has_trait = deceitful
					has_trait = shrewd
					has_trait = gluttonous
					has_trait = ambitious
					has_trait = sarcastic
					has_trait = miserly
					has_trait = jealous
				}
				NOR = {
					has_trait = guileless
					has_trait = righteous
					has_trait = chaste
					has_trait = humble
					has_trait = honest
					has_trait = generous
					has_trait = submissive
				}
			}
			save_scope_as = governor_autonomy_character
		}
		scope:governor_autonomy_character = {
			every_governor_state = {
				every_state_province = {
					save_scope_as = governor_rebellion_province
				}
			}
		}
		root = {
			save_scope_as = chaoting_country
		}
	}

	option = { #准许自治
		name = governor_rebellion.3.a
		scope:governor_rebellion_province = {
			create_country = {
			save_scope_as = governor_autonomy_country
			}
		}
		scope:governor_autonomy_character = {
			every_governor_state = {
				limit = {
					any_state_province = {
						any_neighbor_province = {
							owner = root
						}
					}
				}
				every_state_province = {
					set_owned_by = scope:governor_autonomy_country
				}
			}
		}
		scope:governor_autonomy_character = {
			move_country = scope:governor_autonomy_country
		}
		scope:governor_autonomy_country = {
			set_as_ruler = scope:governor_autonomy_character
			trigger_event = {
				id = governor_rebellion.4
			}
		}
		root = {
			make_subject = {
				target = scope:governor_autonomy_country
				type = tributary
			}
		}
	}

	option = { #不许自治
		name = governor_rebellion.3.b
		scope:governor_autonomy_character = {
			add_loyalty = reject_governor_autonomy
		}
	}
}

governor_rebellion.4 = { #生成叛乱后总督家庭
	hidden = yes
	type = country_event

	immediate = {
		current_ruler = {
			save_scope_as = governor_rebellion_character
		}
		new_family_generation_effect = { FAMILY_CANDIDATE = governor_rebellion_character }
	}
}

namespace = zhou_jieqian
zhou_jieqian.1 = {
	type = country_event
	title = zhou_jieqian.1.t
	desc = zhou_jieqian.1.desc
	picture = china_political
	fire_only_once = yes

	trigger = {
		is_ai = no
	}

	option = {
		name = zhou_jieqian.1.a
		add_treasury = {
			value = has_monthly_income
			multiply = 100
		}
		trigger_event = {
			id = zhou_jieqian.2
			days = 3650
		}
	}

	option = {
		name = zhou_jieqian.1.b
		add_treasury = {
			value = has_monthly_income
			multiply = 200
		}
		trigger_event = {
			id = zhou_jieqian.2
		}
		set_variable = duodaikuan
	}

	option = {
		name = zhou_jieqian.1.c
	}
}

zhou_jieqian.2 = {
	type = country_event
	title = zhou_jieqian.2.t
	desc = zhou_jieqian.2.desc
	picture = china_political

	option = {
		name = zhou_jieqian.2.a
		trigger_event = {
			id = zhou_jieqian.3
			days = 3650
		}
	}
}

zhou_jieqian.3 = {
	type = country_event
	title = zhou_jieqian.3.t
	desc = zhou_jieqian.3.desc
	picture = china_political

	option = {
		name = zhou_jieqian.3.a
		trigger = {
			NOT = {
				has_variable = duodaikuan
			}
		}
		add_treasury = {
			value = has_monthly_income
			multiply = -200
		}
	}

	option = {
		name = zhou_jieqian.3.b
		trigger = {
			has_variable = duodaikuan
		}
		add_treasury = {
			value = has_monthly_income
			multiply = -300
		}
	}
}

namespace = aos_heir_age_events

aos_heir_age_events.1 = {
	type = minor_country_event
	interface_lock = no
	left_portrait = scope:12age_heir_character
	title = aos_heir_age_events.1.t
	desc = aos_heir_age_events.1.desc

	trigger = {
		is_ai = no
		OR = {
			government = chinese_empire
			government = enfeoffment_zhourites
			government = dictatorship
			government = despotic_monarchy
			government = aristocratic_monarchy
			government = stratocratic_monarchy
			government = imperium
			government = imperial_cult
		}
		any_character = {
			is_primary_heir = yes
			is_alive = yes
			age = 12
		}
	}

	immediate = {
		every_character = {
			limit = {
				is_primary_heir = yes
				is_alive = yes
				age = 12
			}
			save_scope_as = 12age_heir_character
		}
	}

	option = {
		name = aos_heir_age_events.1.a
	}
}

aos_heir_age_events.2 = {
	type = minor_country_event
	interface_lock = no
	left_portrait = scope:18age_heir_character
	title = aos_heir_age_events.2.t
	desc = aos_heir_age_events.2.desc

	trigger = {
		is_ai = no
		OR = {
			government = chinese_empire
			government = enfeoffment_zhourites
			government = dictatorship
			government = despotic_monarchy
			government = aristocratic_monarchy
			government = stratocratic_monarchy
			government = imperium
			government = imperial_cult
		}
		any_character = {
			is_primary_heir = yes
			is_alive = yes
			age = 18
		}
	}

	immediate = {
		every_character = {
			limit = {
				is_primary_heir = yes
				is_alive = yes
				age = 18
			}
			save_scope_as = 18age_heir_character
		}
	}

	option = {
		name = aos_heir_age_events.2.a
	}
}

namespace = aos_trigger_character_has_office
aos_trigger_character_has_office.1 = { #遍历所有需要每月触发的事件
	type = country_event
	hidden = yes

	immediate = {
		trigger_event = {
			id = aos_trigger_character_has_office.2
		}
	}
}

aos_trigger_character_has_office.2 = { #检测是否有大祭司，有的话给大祭司 此人是大祭司的变量
	type = country_event
	hidden = yes

	trigger = {
		any_character = {
			OR = {
				has_office = office_high_priest_monarchy
				has_office = office_high_priest
			}
		}
	}

	immediate = {
		random_character = {
			limit = {
				OR = {
					has_office = office_high_priest_monarchy
					has_office = office_high_priest
				}
			}
			set_variable = {
				name = is_religious_tech
				days = 32
			}
		}
	}
}
