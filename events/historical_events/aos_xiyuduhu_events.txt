namespace = sheli_xiyuduhu

sheli_xiyuduhu.1 = {
	
	type = country_event
	title = "sheli_xiyuduhu.1.t"
	desc = "sheli_xiyuduhu.1.desc"
	picture = china_political
	left_portrait = current_ruler

	trigger = {
	}
	
	immediate = {
		hidden_effect = {
			region:xiyu_region = {
				every_region_area = {
					every_area_province = {
						limit = {
							owner = root
						}
						save_scope_as = xiyuduhu_creat_country_province
					}
				}
				every_region_province = {
					limit = {
						owner = root
					}
					add_to_list = xiyuduhu_province
				}
			}
			scope:xiyuduhu_creat_country_province = {
				create_country = {
					save_scope_as = xiyuduhu_country
				}
			}
			every_in_list = {
				list = xiyuduhu_province
				limit = {
					owner = ROOT
				}
				set_conquered_by = scope:xiyuduhu_country
			}
			scope:xiyuduhu_country = {
				set_primary_culture = huaxia
				change_country_name = "XIYUDUHU"
				change_country_adjective = "XIYUDUHU_ADJ"
				change_country_flag = XIYUDUHU
				create_character = {
					culture = duhu
					save_scope_as = xiyuduhu_governor
				}
				set_as_ruler = scope:xiyuduhu_governor
				change_government = chinese_duhufu
				set_variable = chinese_country_named
				add_country_modifier = {
					name = jieshouyizuwenhua_tzjj
					duration = -1
				}
			}
		}
	}
	
	option = {
		name = sheli_xiyuduhu.1.a
		make_subject = {
			target = scope:xiyuduhu_country
			type = duhufu
		}
	}
}

namespace = duhufu_events
duhufu_events.1 = {
	type = country_event
	hidden = yes

	immediate = {
		trigger_event = {
			id = duhufu_events.2
		}
		trigger_event = {
			id = duhufu_events.3
		}
		trigger_event = {
			id = duhufu_events.5
		}
		trigger_event = {
			id = duhufu_events.6
		}
	}
}

duhufu_events.2 = { #如果是都护府，则给都护府统治者都护府都护
	
	type = country_event
	hidden = yes

	trigger = {
		is_subject_type = duhufu
		NOT = {
			current_ruler = {
				has_culture = duhu
			}
		}
	}
	
	immediate = {
		current_ruler = {
			set_culture = duhu
		}
	}
}

duhufu_events.3 = { #如果都护府不再是都护府，则移除都护府统治者是都护
	
	type = country_event
	hidden = yes

	trigger = {
		NOT = {
			is_subject_type = duhufu
		}
		current_ruler = {
			has_culture = duhu
		}
	}
	
	immediate = {
		current_ruler = {
			set_culture = huaxia
		}
	}
}

duhufu_events.4 = { #都护府上一任都护去世，新一任非世袭都护上任
	
	type = country_event
	hidden = yes

	trigger = {
		is_subject_type = duhufu
	}

	immediate = {
		create_character = {
			culture = duhu
			save_scope_as = duhu_character
		}
		set_as_ruler = scope:duhu_character
	}
}

duhufu_events.5 = { #都护府每月自动确认政体为都护府
	
	type = country_event
	hidden = yes

	trigger = {
		is_subject_type = duhufu
		NOT = {
			government = chinese_duhufu
		}
	}

	immediate = {
		change_government = chinese_duhufu
		set_variable = chinese_country_named
	}
}

duhufu_events.6 = { #都护府不再臣属于中原王朝则将政体转回专制君主制
	
	type = country_event
	hidden = yes

	trigger = {
		NOT = {
			is_subject_type = duhufu
		}
		government = chinese_duhufu
	}

	immediate = {
		change_government = despotic_monarchy
		remove_variable = chinese_country_named
		trigger_event = {
			id = duhufu_events.7
		}
	}
}

duhufu_events.7 = {
	type = country_event
	title = "duhufu_events.7.t"
	desc = "duhufu_events.7.desc"
	picture = china_political
	left_portrait = current_ruler

	option = {
		name = "china_civil_war.1.a" #改国号为晋
		change_country_name = "JIN"
		hidden_effect = {
			set_variable = chinese_country_named
			change_country_adjective = "JIN_ADJ"
			change_country_flag = JIN
		}
	}

	option = {
		name = "china_civil_war.1.b" #改国号为周
		change_country_name = "ZHO"
		hidden_effect = {
			set_variable = chinese_country_named
			change_country_adjective = "ZHO_ADJ"
			change_country_flag = ZHO
		}
	}

	option = {
		name = "china_civil_war.1.c" #改国号为鲁
		change_country_name = "LUU"
		hidden_effect = {
			set_variable = chinese_country_named
			change_country_adjective = "LUU_ADJ"
			change_country_flag = LUU
		}
	}

	option = {
		name = "china_civil_war.1.d" #改国号为宋
		change_country_name = "SNG"
		hidden_effect = {
			set_variable = chinese_country_named
			change_country_adjective = "SNG_ADJ"
			change_country_flag = SNG
		}
	}

	option = {
		name = "china_civil_war.1.e" #改国号为魏
		change_country_name = "WEI"
		hidden_effect = {
			set_variable = chinese_country_named
			change_country_adjective = "WEI_ADJ"
			change_country_flag = WEI
		}
	}
}